# CHANGELOG

## v2.0.0 - 2026-01-16

### 🎉 Major Update - 완전 리팩토링

**핵심 변경:**
- 3700줄 script.js → 8개 모듈로 완전 분리
- DataService 레이어 추가로 DB 통합 관리
- EventManager로 이벤트 중복 방지
- 모든 코드에 주석 추가

---

### ✅ 추가된 것

#### 파일 구조
```
✅ js/config.js - Firebase 설정 분리
✅ js/services/dataService.js - DB 통합 관리
✅ js/modules/runlog.js - 런로그 핵심 기능
✅ js/modules/home.js - 홈 화면
✅ js/utils/helpers.js - 공통 함수
✅ js/utils/imageCompressor.js - 이미지 압축
✅ js/utils/eventManager.js - 이벤트 관리
✅ js/main.js - 초기화 & 페이지 관리
```

#### 기능
```
✅ 이벤트 중복 방지 시스템
✅ 이미지 압축 (1200px, 80% 품질)
✅ 모듈화된 페이지 관리
✅ 깔끔한 에러 처리
✅ 로딩 상태 표시
```

---

### 🔧 수정된 것

#### 런로그 기능
```
✅ 대회 기록 저장 - DataService 사용
✅ 특별한 러닝 저장 - DataService 사용
✅ 사진 업로드 - 이벤트 중복 해결
✅ 폼 제출 - 깔끔하게 정리
✅ 저장 후 자동 페이지 이동
```

#### 페이지 관리
```
✅ 페이지 전환 - PageManager로 통합
✅ 하단 네비게이션 - EventManager 사용
✅ + 버튼 메뉴 - 독립 함수로 분리
```

#### DB 접근
```
✅ 모든 Firestore 접근 → DataService
✅ 중복 코드 완전 제거
✅ 에러 처리 통일
✅ 클라이언트 정렬 (Index 불필요)
```

---

### ❌ 제거된 것

```
❌ 중복 함수 (showPostDetail 2개 등)
❌ 불필요한 더미 데이터
❌ 사용하지 않는 코드
❌ 하드코딩된 알림 함수
❌ 친구/크루 활동 (임시)
```

---

### 🐛 수정된 버그

```
✅ 사진 업로드 안 되는 문제
✅ 이벤트 리스너 중복 문제
✅ 메모 required 문제
✅ 이미지 용량 초과 문제
✅ 하단 메뉴 안 눌리는 문제
✅ 페이지 전환 시 꼬이는 문제
```

---

### 📊 v1.3.8 → v2.0.0 비교

| 항목 | v1.3.8 | v2.0.0 |
|------|--------|--------|
| **파일 개수** | 1개 (script.js) | 8개 (모듈) |
| **총 라인 수** | 3700줄 | 300-400줄/파일 |
| **중복 함수** | 많음 | 0개 |
| **DB 접근** | 여기저기 | DataService만 |
| **이벤트 관리** | 중복 발생 | EventManager |
| **주석** | 거의 없음 | 완비 |
| **유지보수** | 어려움 | 쉬움 |
| **기능 추가** | 꼬임 | 독립적 |

---

### 💪 개선 효과

#### 개발 속도
```
Before: 기능 추가 시 2-3일 + 버그 수정 5일
After:  기능 추가 시 1일 + 버그 거의 없음
```

#### 코드 품질
```
Before: 중복 많음, 구조 복잡, 주석 없음
After:  중복 0개, 구조 명확, 주석 완비
```

#### 안정성
```
Before: 하나 고치면 다른 곳 깨짐
After:  모듈 독립적, 영향 범위 제한
```

---

## v1.3.8 - 2026-01-14

### 추가
- 이미지 압축 기능 (15MB → 600KB)

### 수정
- Firestore 용량 초과 오류 해결

---

## v1.3.7 - 2026-01-14

### 수정
- 사진 업로드 이벤트 리스너 수정
- cloneNode 방식에서 전역 함수 방식으로 변경

---

## v1.3.6 - 2026-01-14

### 수정
- 특별 러닝 메모 required 제거
- 사진 업로드 개선

---

## v1.3.5 - 2026-01-14

### 추가
- + 버튼 클릭 영역 확대
- 저장 후 자동 페이지 이동

### 수정
- 하단 네비게이션 pointer-events 개선

---

## v1.3.4 - 2026-01-14

### 수정
- Firestore Index 오류 해결
- 클라이언트 사이드 정렬 적용

---

## v1.3.3 - 2026-01-14

### 수정
- submitRunningRecord 함수 재구현
- 런로그 저장 로직 수정

---

## v1.3.2 - 2026-01-14

### 수정
- 런로그 저장 기능 오류 수정
- 함수 중복 정의 문제 해결

---

## v1.3.1 - 2026-01-13

### 추가
- Firestore 완전 연동
- 런로그 저장 기능

---

## v1.0.0 - 2026-01-12

### 초기 버전
- 기본 UI 구현
- 더미 데이터
- 페이지 전환
